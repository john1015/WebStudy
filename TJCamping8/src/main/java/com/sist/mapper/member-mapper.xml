<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sist.mapper.member-mapper">
 <select id="memberIdCountData" resultType="int" parameterType="string">
  SELECT COUNT(*) FROM member
  WHERE id=#{id}
 </select>
 <select id="memberInfoData" resultType="MemberVO" parameterType="string">
   SELECT * FROM member
   WHERE id=#{id}
 </select>
 
  <select id="memberUpdateData" resultType="MemberVO" parameterType="string">
   SELECT id,name,sex,birth,post,addr1,addr2,phone,email,content
   FROM member
   WHERE id=#{id}
  </select>
  <insert id="memberInsert" parameterType="MemberVO">
   INSERT INTO member VALUES(
     #{id},#{pwd},#{name},#{sex},#{birth},#{post},
     #{addr1},#{addr2},#{phone},#{email},#{content},SYSDATE,'n'
   )
  </insert>
  <!-- 회원 수정  -->
  <select id="memberGetPassword" resultType="string" parameterType="string">
   SELECT pwd FROM member
   WHERE id=#{id}
  </select>
  <update id="memberUpdate" parameterType="MemberVO">
   UPDATE member SET 
   name=#{name},birth=#{birth},post=#{post},
   addr1=#{addr1},addr2=#{addr2},phone=#{phone},email=#{email},
   content=#{content}
   WHERE id=#{id}
  </update>
  <!-- 아이디 찾기 -->
  <select id="memberIdFindCount" resultType="int" parameterType="MemberVO">
   SELECT COUNT(*) FROM member
   WHERE name=#{name} AND email=#{email}
  </select>
  <select id="memberIdFindData" resultType="String" parameterType="MemberVO">
   SELECT RPAD(SUBSTR(id,1,2),LENGTH(id),'*') FROM member
   WHERE name=#{name} AND email=#{email}
  </select>
  <select id="memberIdFindCount2" resultType="int" parameterType="MemberVO">
   SELECT COUNT(*) FROM member
   WHERE name=#{name} AND phone=#{phone}
  </select>
  <select id="memberIdFindData2" resultType="String" parameterType="MemberVO">
   SELECT RPAD(SUBSTR(id,1,2),LENGTH(id),'*') FROM member
   WHERE name=#{name} AND phone=#{phone}
  </select>
  <!-- 비밀번호 찾기 -->
  <select id="memberPwdFindCount" resultType="int"
		parameterType="String">
		SELECT COUNT(*) FROM member
		WHERE id=#{id}
	</select>
	<select id="memberPwdFindData" resultType="String"
		parameterType="MemberVO">
		SELECT pwd FROM member
		WHERE id=#{id}
	</select>
	<select id="pwdCheckData" resultType="int"
		parameterType="hashmap">
		SELECT COUNT(*) FROM member
		WHERE id=#{id} AND pwd=#{pwd}
	</select>
	<update id="pwdChange" parameterType="hashmap">
		UPDATE member SET
		pwd=#{pwd}
		WHERE id=#{id}
	</update>
</mapper>